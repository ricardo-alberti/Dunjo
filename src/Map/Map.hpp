#pragma once

#include "Tiles/CentralTileFactory/CentralTileFactory.hpp"
#include "Tiles/Tile.hpp"
#include "Tiles/TileAspects/AnimatedTile.hpp"
#include <SFML/Graphics.hpp>
#include <SFML/Graphics/RenderWindow.hpp>
#include <memory>

const int WIDTH = 27;
const int HEIGHT = 15;

class Map {
private:
  const int tileMap[HEIGHT][WIDTH] = {
    {00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,24,00,00,00,00,00,00},
    {00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,24,00,00,00,00,00,00},
    {00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,24,00,00,00,00,00,00},
    {00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,24,00,00,00,00,00,00},
    {00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,24,00,00,00,00,00,00},
    {00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,24,00,00,00,00,00,00},
    {00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00},
    {00,00,00,00,00,00,00,00,00,00,00,00,00,00,20,00,00,00,00,00,00,00,00},
    {00,00,00,00,00,00,00,00,00,00,00,00,00,00,19,25,00,00,00,00,00,00,00},
    {00,00,00,00,00,23,00,28,28,28,00,00,27,10,11,11,12,00,00,00,00,00,00},
    {00,00,00,00,27,27,00,00,00,00,00,00,22,00,00,00,00,00,00,00,00,00,00},
    {21,00,00,26,00,00,00,11,00,00,00,00,22,00,00,00,00,00,00,00,00,00,00},
    {27,27,27,27,27,00,00,00,00,20,00,00,22,00,00,00,00,00,00,00,00,00,00},
    {00,00,27,11,20,20,20,00,00,19,00,00,22,25,25,25,00,00,00,00,00,00,00},
    {11,11,11,11,11,19,19,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11},
  };

  std::vector<std::shared_ptr<Tile>> tileObjects;
  std::vector<std::shared_ptr<AnimatedTile>> animated;
  CentralTileFactory factory;

public:
  Map();
  void loadTiles();
  void draw(sf::RenderWindow &window);
  void Update(float deltaTime);
  const std::vector<std::shared_ptr<Tile>> &getTiles() const;
};
